<rules_summary>
Replace specific cells in regions of color '3' with '4' and '2' based on their position relative to the border of the shape.
</rules_summary>
<input_generation>
Input grids contain colored cells. The transformation operates on color patterns and relationships.
</input_generation>
<solution_steps>
1. Identify regions of color '3'.
2. For each region of color '3', replace specific cells near the border of each region with '4' and '2' according to a pattern.
3. Leave the remaining cells unchanged.
</solution_steps>
<key_insight>
The grid contains regions of the same color connected horizontally or vertically.
</key_insight>
<puzzle_concepts>
- boundary
- color_mapping
- connected
- mirroring
- tiling
</puzzle_concepts>
