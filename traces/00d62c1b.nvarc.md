<rules_summary>
A black cell at a given position (r, c) is changed to red if and only if there is at least one blue cell located somewhere above it in the same column, one below it in the same column, one to its left in the same row, and one to its right in the same row. All other cells remain unchanged.
</rules_summary>
<input_generation>
Input grids of varying sizes are provided. The transformation maintains relationships between input and output dimensions.
</input_generation>
<solution_steps>
1. Create a copy of the input grid.
2. Iterate through each cell (r, c) of the input grid.
3. If the color of the current cell is not black (0), skip to the next cell.
4. If the cell is black, perform four checks:
5. 1. Scan upwards from (r-1, c) to (0, c) to find a blue cell (3).
6. 2. Scan downwards from (r+1, c) to the last row to find a blue cell.
7. 3. Scan leftwards from (r, c-1) to (r, 0) to find a blue cell.
8. 4. Scan rightwards from (r, c+1) to the last column to find a blue cell.
9. If all four checks are successful (a blue cell is found in each direction), change the color of the cell at (r, c) in the copied grid to red (4).
10. Return the modified copy as the output grid.
</solution_steps>
<key_insight>
The output grid has the same dimensions as the input grid.
</key_insight>
<puzzle_concepts>
- boundary
- color_mapping
- connected
- filling
</puzzle_concepts>
